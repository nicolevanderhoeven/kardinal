version: '3.8'

# Alternative docker-compose file for using a pre-built image from a registry
# Usage: docker-compose -f docker-compose.registry.yml up -d
# Update the image name below to match your registry (e.g., username/kardinal:latest)

services:
  kardinal:
    image: nvanderhoeven/kardinal:latest
    container_name: kardinal
    restart: unless-stopped
    volumes:
      - /srv/kardinal/kardinal_public:/srv/kardinal/kardinal_public:ro
    environment:
      - KANBAN_MARKDOWN_FILE=/srv/kardinal/kardinal_public/Grafana Labs Kanban.md
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.kanban.rule=Host(`kardinal.nvdh.dev`)"
      - "traefik.http.routers.kanban.entrypoints=websecure"
      - "traefik.http.routers.kanban.tls.certresolver=letsencrypt"
      - "traefik.http.services.kanban.loadbalancer.server.port=5000"
    networks:
      - traefik

networks:
  traefik:
    external: true

